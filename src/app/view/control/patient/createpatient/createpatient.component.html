<div class="container">
  <div class="row">
    <div class="col-md-12 col-sm-12 vertical-center">
      <div class="card">
        <div class="card-header">
          <div class="col-md-6     ">
            <h4 *ngIf="!modoEditar">Registro Paciente</h4>
            <h4 *ngIf="modoEditar">Editar Paciente</h4>
          </div>
        </div>
        <div class="card-body">
          <form [formGroup]="personform">
            <div class="row">
              <div class="col-md-6">
                <label class="col-form-label">Nombres *</label>
                <input class="form-control" type="text" name="nombres" id="nombres" placeholder="Ingrese su Nombre"
                  formControlName="nombre">
              </div>
              <div class="col-md-6">
                <label class="col-form-label">Apellido Paterno *</label>
                <input class="form-control" type="text" name="apellidos" id="apellidos"
                  placeholder="Ingrese su Apellido Paterno" formControlName="apaterno">
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <label class="col-form-label">Apellido Materno *</label>
                <input class="form-control" type="text" name="apellidos" id="apellidos"
                  placeholder="Ingrese su Apellido Materno" formControlName="amaterno">
              </div>
              <div class="col-md-6">
                <label class="col-form-label">Email *</label>
                <input class="form-control" type="email" name="correo" id="correo" placeholder="Ingrese su Correo"
                  formControlName="email">
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <label class="col-form-label">Selecciona Tipo de Documento *</label>
                <select class="form-select" aria-label="Default select example" formControlName="tipoDocumento">
                  <option *ngFor="let item of documentType|async" value="{{item.value}}">{{item.label}}
                  </option>
                </select>
              </div>
              <div class="col-md-6">
                <label class="col-form-label">Numero de Documento *</label>
                <input class="form-control" type="number" name="documento" id="documento"
                  placeholder="Ingrese su Numero de Documento" formControlName="numeroDocumento"
                  pattern="[0-9]+([\.,][0-9]*)?$">
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <label class="col-form-label">Selecciona Genero *</label>
                <select class="form-select" aria-label="Default select example" formControlName="genero">
                  <option selected>Genero</option>
                  <option value="Masculino">Masculino</option>
                  <option value="Femenino">Femenino</option>
                </select>
              </div>
              <div class="col-md-6">
                <label class="col-form-label">Direccion </label>
                <input class="form-control" type="documento" name="direccion" id="direccion"
                  placeholder="Ingrese su la direccion" formControlName="direccion">
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <label class="col-form-label">Celular *</label>
                <input class="form-control" type="number" name="celular" id="celular" placeholder="Ingrese su celular"
                  formControlName="celular">
              </div>

              <div class="col-md-6">
                <label class="col-form-label">Fecha de Nacimiento *</label>
                <input class="form-control" type="date" name="fecha" id="fecha nacimiento"
                  placeholder="Ingrese Fecha de nacimiento" formControlName="fechaNacimiento">
              </div>

            </div>
          </form>
          <hr>
          <form (submit)="create()" [formGroup]="patientform">
            <div class="row">

              <div class="col-md-6">
                <label class="col-form-label">Alergias</label>
                <div class="input-group mb-3">
                  <input class="form-control" type="text" name="alergia" id="alergias"
                    placeholder="Ingrese Alergia del paciente" [(ngModel)]="alergiaAdd"
                    [ngModelOptions]="{standalone: true}">
                  <button class="btn btn-outline-primary" type="button" (click)="agregarAlergia()">
                    <fa-icon [icon]='"plus"'></fa-icon>
                  </button>
                </div>
                <ng-container *ngFor="let item of listAlergias">
                  <button type="button" class="btn btn-primary m-1">
                    {{item}} <span (click)="eliminarAlergia(item)" class="badge text-bg-danger">
                      <fa-icon [icon]='"times"'></fa-icon>
                    </span>
                  </button>

                </ng-container>
              </div>
              <div class="col-md-6">
                <label class="col-form-label">Enfermedades</label>
                <div class="input-group mb-3">
                  <input class="form-control" type="text" name="alergia" id="alergias"
                    placeholder="Ingrese Enfermedades del paciente" [(ngModel)]="enfermedadesAdd"
                    [ngModelOptions]="{standalone: true}">
                  <button class="btn btn-outline-primary" type="button" (click)="agregarEnfermedad()">
                    <fa-icon [icon]='"plus"'></fa-icon>
                  </button>
                </div>
                <ng-container *ngFor="let item of listEnfermedades">
                  <button type="button" class="btn btn-primary m-1">
                    {{item}} <span (click)="eliminarEnfermedad(item)" class="badge text-bg-danger">
                      <fa-icon [icon]='"times"'></fa-icon>
                    </span>
                  </button>
                </ng-container>
              </div>
              <div>
                <input id='fotocamara' name="fotocamara" type="text" class="form-control" style="display: none" />
              </div>
              <div class="col-md-6">
                <label class="col-form-label">redSocial</label>
                <input class="form-control" type="textarea" name="redSocial" id="redSocial"
                  placeholder="Ingrese sus redSocial Sociales o Formas de contacto " formControlName="redSocial">
              </div>
              <div class="col-md-6">
                <label class="col-form-label">Nombre del Contacto de Emergencia *</label>
                <input class="form-control" type="text" name="contactoEmergencia" id="contactoEmergencia"
                  placeholder="Ingrese el nombre de contacto  de Emergencia " formControlName="contactoEmergencia">
              </div>
              <div class="col-md-6">
                <label class="col-form-label">Numero de Emergencia *</label>
                <input class="form-control" type="number" name="numeroEmergencia" id="numeroEmergencia"
                  placeholder="Ingrese El numero de Emergencia" formControlName="numeroEmergencia">
              </div>
              <div class="col-md-6">
                <label class="col-form-label">Peso (Kg) </label>
                <input class="form-control" type="number" step="0.01" name="peso" id="peso"
                  placeholder="Ingrese su peso" formControlName="peso">
              </div>
              <div class="col-md-6">
                <label class="col-form-label">Talla (cm) </label>
                <input class="form-control" type="number" step="0.01" name="talla" id="talla"
                  placeholder="Ingrese su  talla" formControlName="talla">
              </div>
              <div class="col-md-6" style="text-align: center; margin-top: 1rem;">
                <button class="btn btn-success" type="button" (click)="onTakePhoto()">Tomar foto</button>
              </div>
            </div>
          </form>
        </div>
        <div class="card-footer" style="text-align: center;">
          <div class="col" *ngIf="!modoEditar">
            <input (click)="create()" class="btn btn-primary" type="submit" value="Registrar">
          </div>
          <div class="col" *ngIf="modoEditar">
            <input (click)="create()" class="btn btn-primary" type="submit" value="Actualizar Datos">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #modalActions>
  <div class="modal-header">
    <h4 class="modal-title pull-left">tomar foto</h4>
  </div>
  <div class="modal-body">
    <div class="col " style="text-align: center !important">
      <webcam [trigger]="triggerObservable" (imageCapture)="handleImage($event)"></webcam>
    </div>
  </div>
  <div class="modal-footer" style="justify-content: center;">
    <button class="btn btn-success" (click)="triggerSnapshot()">Tomar foto</button>
  </div>
</ng-template>